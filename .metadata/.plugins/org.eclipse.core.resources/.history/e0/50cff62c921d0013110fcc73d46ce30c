package laundrylist.controller;

import org.json.JSONException;
import org.json.JSONObject;

import android.content.Intent;
import android.os.AsyncTask;
import laundrylist.model.JSONController.JSONPost;
import laundrylist.view.ExploreActivity;
import laundrylist.view.LoginActivity;

public class LoginController {
	private LoginActivity view;

	public LoginController(LoginActivity activity) {
		this.view = activity;
	}
	
	public void onLoginPressed() {
		view.startActivity(new Intent(view, ExploreActivity.class));
		view.finish();
	}
	
	private class JSONPostTask extends AsyncTask<Object[], Void, String> {

		public String getURL(Object[] data) {
			String baseString = "http://orion.haurytech.com/";
			JSONPost type = (JSONPost) data[0];
			switch (type) {
			case NEWACCOUNT:
				return baseString;
			}
			return "";

		}

		public JSONObject getJSON(Object[] data) {
			JSONPost type = (JSONPost) data[0];
			switch (type) {
			case NEWACCOUNT:
				JSONObject object = new JSONObject();
				try {
					object.put("email", (String) data[1]);
					object.put("name", (String) data[2]);
					object.put("password", (String) data[3]);
					return object;
				} catch (JSONException e) {
					e.printStackTrace();
				}
			}
			return null;

		}

		@Override
		protected String doInBackground(Object[]... params) {
			String URL = getURL(params);
			JSONObject object = getJSON(params);
			/*
			 * StringBuilder builder = new StringBuilder(); HttpClient client =
			 * new DefaultHttpClient(); HttpGet httpGet = new HttpGet(URL); try
			 * { HttpResponse response = client.execute(httpGet); StatusLine
			 * statusLine = response.getStatusLine(); int statusCode =
			 * statusLine.getStatusCode(); if (statusCode == 200) { HttpEntity
			 * entity = response.getEntity(); InputStream content =
			 * entity.getContent(); BufferedReader reader = new BufferedReader(
			 * new InputStreamReader(content)); String line; while ((line =
			 * reader.readLine()) != null) { builder.append(line); } } else {
			 * Log.e(JSONController.class.toString(),
			 * "Failed to download file"); } } catch (ClientProtocolException e)
			 * { e.printStackTrace(); } catch (IOException e) {
			 * e.printStackTrace(); } return builder.toString();
			 */
			return "";
		}

		@Override
		protected void onPostExecute(String result) {
			//do something
		}
	}
}
